#!/bin/sh --

lessit() {
	tmp="$(mktemp)"
	while read -r in; do
		git -C "$HOME/local/src/$in" diff HEAD origin/HEAD --color > "$tmp"
		alias git=git-C "$HOME/local/src/$in"
		st -e less -R "$tmp"
	done
	rm "$tmp"
}

dmenu -p "Repo to view: " < "$XDG_DATA_HOME"/pulls | lessit
